(()=>{"use strict";var t={d:(e,r)=>{for(var a in r)t.o(r,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:r[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{Y:()=>d});const e={summaryP:document.querySelector(".summary"),bigWeatherIcon:document.querySelector(".big-weather-icon"),bigTemperatureNumber:document.querySelector(".big-temperature-number"),precipitationLi:document.querySelector(".data-list .precipitation .number"),windLi:document.querySelector(".data-list .wind .number"),windDirectionLi:document.querySelector(".data-list .wind-direction .arrow"),temperatureChart:document.querySelector(".chart.temperature"),precipitationChart:document.querySelector(".chart.precipitation"),temperatureChartButton:document.querySelector(".temperature-chart-button"),precipitationChartButton:document.querySelector(".precipitation-chart-button")},r=t=>{e.temperatureChart.classList.remove("hidden"),e.precipitationChart.classList.remove("hidden"),e.temperatureChartButton.classList.remove("hidden"),e.precipitationChartButton.classList.remove("hidden"),t.target.classList[0].includes("temperature")?(e.precipitationChart.classList.add("hidden"),e.precipitationChartButton.classList.add("hidden")):(e.temperatureChart.classList.add("hidden"),e.temperatureChartButton.classList.add("hidden"))},a=t=>{t&&t.destroy()},n=(t,n)=>{var o;(t=>{const r=d[t.dateObject.getDay()],a=t.dateObject.getHours();let n=t.dateObject.getMinutes();n<10&&(n="0"+n);const o=t.description;e.summaryP.textContent=`${r} ${a}:${n}, ${o}`})(t),o=t,e.bigWeatherIcon.setAttribute("src",`./images/weather-icons/${o.iconName}.png`),e.bigWeatherIcon.setAttribute("alt","icon of "+o.description),e.bigTemperatureNumber.innerHTML=`${Math.round(o.temperature)}<sup>°</sup>`,e.precipitationLi.textContent="0"|o.precip,e.windLi.textContent=Math.round(3.6*o["wind-speed"]),e.windDirectionLi.style.transform=`rotate(${-90+Math.abs(o["wind-direction"]-180)}deg)`,(t=>{Chart.defaults.font.size=16,Chart.defaults.color="white",Chart.defaults.font.family="Dosis",Chart.defaults.plugins.tooltip.enabled=!1,Chart.defaults.plugins.legend.display=!1,Chart.defaults.scale.beginAtZero=!0,Chart.defaults.scale.grid.display=!1,Chart.defaults.scale.grid.drawBorder=!1,Chart.defaults.scale.ticks.maxRotation=0,Chart.defaults.scale.ticks.maxTicksLimit=6,Chart.defaults.layout.padding={top:30,right:10,left:10},Chart.defaults.hover.mode=null,a(e.temperatureChart.chartInstance);const r=(t=>{const e={temperatureData:[],timestamps:[]};for(let r=0;r<12;r++)e.temperatureData.push(Math.round(t.hourly[r].temp)),e.timestamps.push(new Date(1e3*t.hourly[r].dt).getHours()+"h");return e})(t);(t=>{e.temperatureChart.chartInstance=new Chart(e.temperatureChart,{plugins:[ChartDataLabels],type:"line",data:{labels:t.timestamps,datasets:[{data:t.temperatureData,pointRadius:0,borderColor:"white",borderWidth:2,fill:!0,backgroundColor:"transparent",tension:.3,datalabels:{align:"top",padding:{left:20,bottom:10,right:20},display:"auto",formatter:t=>t+"°"}}]},options:{scales:{y:{ticks:{display:!1}}}}})})(r)})(n),(t=>{a(e.precipitationChart.chartInstance);const r=(t=>{const e={precipitationData:[],timestamps:[]};for(let r=0;r<12;r++)e.precipitationData.push(100*t.hourly[r].pop),e.timestamps.push(new Date(1e3*t.hourly[r].dt).getHours()+"h");return e})(t);(t=>{e.precipitationChart.chartInstance=new Chart(e.precipitationChart,{plugins:[ChartDataLabels],type:"bar",data:{labels:t.timestamps,datasets:[{barPercentage:1,categoryPercentage:1,data:t.precipitationData,backgroundColor:"rgba(255, 255, 255, .3)",datalabels:{anchor:"end",align:"top",padding:{left:5,right:5,top:5},display:"auto",formatter:t=>t>0?t+"%":""}}]},options:{scales:{y:{ticks:{display:!1}}}}})})(r)})(n),e.temperatureChartButton.addEventListener("click",r),e.precipitationChartButton.addEventListener("click",r)},o=(t,e)=>{const r=document.createElement("p");return r.classList.add(t),r.textContent=e,r},i=(t,e)=>{const r=o("time",t.dateObject.getHours()+"h"),a=o("temperature",Math.round(t.temperature)+"°"),n=o("precipitation",Math.round(100*t.precip)+"%"),i=o("wind-speed",Math.round(3.6*t["wind-speed"])),s=(t=>{const e=document.createElement("img");e.classList.add("weather-icon"),e.setAttribute("src",`./images/weather-icons/${t.iconName}.png`),e.setAttribute("alt","icon of "+t.description);const r=document.createElement("div");return r.classList.add("weather-icon-wrapper"),r.append(e),((t,e)=>{const r=document.createElement("div");r.classList.add("tooltip"),r.textContent=e,t.append(r)})(r,t.description),r})(t),c=document.createElement("img");c.classList.add("wind-direction"),c.setAttribute("src","./images/right-arrow.png"),c.style.transform=`rotate(${-90+Math.abs(t["wind-direction"]-180)}deg)`;const d=document.createElement("div");d.classList.add("time-section"),d.append(r,s,a,n,i,c),e.append(d)},s=t=>{const e=t.cloneNode(!0);return e.classList.remove("template"),document.querySelector(".coming-days").append(e),e},c="be9f3e7fb99ef3d5a6cdca04ec93f7de",d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u={searchInput:document.querySelector(".search-input"),mainElem:document.querySelector("main"),searchButtonImg:document.querySelector(".search-button img"),cursor:document.querySelector(".cursor")};window.onload=(()=>{const t=document.querySelector(".coming-days-bg-cnt");document.documentElement.style.setProperty("--comingDaysOffsetTop",t.offsetTop+40+"px")})();const p=t=>{const e=document.createElement("p");e.classList.add("error-message"),e.textContent=t,document.body.insertBefore(e,document.body.children[2]),u.mainElem.style.display="none"};async function l(){const t=await(async()=>{(()=>{const t=document.querySelectorAll(".day");for(const e of t)e.classList.contains("template")||e.remove()})(),(()=>{const t=document.querySelector(".error-message");t&&(t.remove(),u.mainElem.style.display="block")})();const t=u.searchInput.value;let e;return await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${t}&units=metric&appid=${c}`).then((t=>t.json())).then((t=>e=t)),e})();if("200"!==t.cod)return void p(t.message);const e=await(async t=>{let e;const r=t.city.coord.lat,a=t.city.coord.lon;return await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${r}&lon=${a}&units=metric&appid=${c}`).then((t=>t.json())).then((t=>e=t)),e})(t),r=(t=>{const e=[];return e.summary=t.current.weather[0].main,e.description=t.current.weather[0].description,e.dateObject=new Date(1e3*t.current.dt),e.temperature=t.current.temp,e.humidity=t.current.humidity,e.precip=t.current.pop,e.iconName=t.current.weather[0].icon,e["wind-speed"]=t.current.wind_speed,e["wind-direction"]=t.current.wind_deg,e})(e);n(r,e);(t=>{const e=document.querySelector(".day");let r,a="";for(const n of t){const t=d[n.dateObject.getDay()];if(a!==t){a=t;const n=s(e);n.children[0].textContent=t,r=n.children[1]}i(n,r)}document.querySelector(".day:not(.template) .day-name").textContent="Today"})((t=>{if("200"!==t.cod)return void p(t.message);const e=[];for(const r of t.list){const t={};t.summary=r.weather[0].main,t.description=r.weather[0].description,t.dateObject=new Date(1e3*r.dt),t.temperature=r.main.temp,t.humidity=r.main.humidity,t.clouds=r.clouds.all,t.precip=r.pop,t.iconName=r.weather[0].icon,t["wind-speed"]=r.wind.speed,t["wind-direction"]=r.wind.deg,e.push(t)}return e})(t))}l(),u.searchInput.addEventListener("focus",(()=>{u.cursor.style.display="none",u.searchButtonImg.style.opacity="1"})),u.searchInput.addEventListener("blur",(()=>{u.cursor.style.display="inline",u.searchButtonImg.style.opacity=".5"})),document.querySelector(".search-button").addEventListener("click",l),window.addEventListener("keydown",(t=>{"Enter"===t.key&&(u.searchInput.blur(),l())})),window.addEventListener("scroll",(()=>{const t=window.scrollY;document.querySelector(".background").style.top=-.5*t+"px"}))})();